"use strict";(self.webpackChunkemilus=self.webpackChunkemilus||[]).push([[2035],{1166:function(e,t,n){var r,a=n(168),s=n(9439),c=n(2791),i=n(364),u=n(2554),m=n(6443),o=n(4923);t.Z=function(e){var t=e.children,n=e.background,l=e.className,d=e.overlap,f=(0,c.useState)(0),p=(0,s.Z)(f,2),h=p[0],x=p[1],Z=(0,c.useRef)(null),v=(0,i.v9)((function(e){return e.theme.navType})),y=(0,i.v9)((function(e){return e.theme.currentTheme}));(0,c.useEffect)((function(){if(v===m.XA){var e=window.innerWidth,t=Z.current.offsetWidth;x((e-t)/2)}}),[v]);return(0,o.tZ)("div",{ref:Z,css:(0,u.iv)(r||(r=(0,a.Z)(["\n\t\t\t\tbackground-color: ",";\n\t\t\t\tpadding: ","px;\n\t\t\t\tmargin-top: -","px;\n\t\t\t\tmargin-left: -","px;\n\t\t\t\tmargin-right: -","px;\n\n\t\t\t\t@media "," {\n\t\t\t\t\tmargin-left: -","px;\n        \t\t\tmargin-right: -","px;\n\t\t\t\t}\n\n\t\t\t\t","\n\t\t\t"])),"dark"===y?"#2f3a50":m.wx.WHITE,m.hv.LAYOUT_CONTENT_GUTTER,m.hv.LAYOUT_CONTENT_GUTTER,m.hv.LAYOUT_CONTENT_GUTTER,m.hv.LAYOUT_CONTENT_GUTTER,m.qk.MOBILE,m.hv.LAYOUT_CONTENT_GUTTER_SM,m.hv.LAYOUT_CONTENT_GUTTER_SM,d?"margin-bottom: -4.6875rem;":""),className:"page-header-alt ".concat(l||""),style:function(){var e={backgroundImage:n?"url(".concat(n,")"):"none"};return v===m.XA&&(e.marginRight=-h,e.marginLeft=-h,e.paddingLeft=0,e.paddingRight=0),e}(),children:v===m.XA?(0,o.tZ)("div",{className:"container",children:t}):(0,o.tZ)(o.HY,{children:t})})}},8470:function(e,t,n){var r=n(1413),a=n(4236).Z.div((function(e){var t=e.justifyContent,n=e.alignItems,a=e.flexDirection,s=e.gap,c=e.padding,i=e.margin,u={display:"flex",justifyContent:t,alignItems:n,gap:"number"===typeof s?"".concat(s,"px"):s};return a&&(u.flexDirection=a),c&&(u.padding=c),i&&(u.margin=i),(0,r.Z)({},u)}));t.Z=a},4276:function(e,t,n){var r=n(4942),a=n(1413),s=n(4165),c=n(5861),i=n(5020),u=n(6724),m={};m.createDocument=function(){var e=(0,c.Z)((0,s.Z)().mark((function e(t,n){var r;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,u.ET)((0,u.hJ)(i.db,t),n);case 3:return r=e.sent,e.abrupt("return",r.id);case 7:throw e.prev=7,e.t0=e.catch(0),new Error("Error adding document: "+e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}(),m.getDocuments=function(){var e=(0,c.Z)((0,s.Z)().mark((function e(t){var n,r;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,u.PL)((0,u.hJ)(i.db,t));case 3:return n=e.sent,r=n.docs.map((function(e){return(0,a.Z)({id:e.id},e.data())})),e.abrupt("return",r);case 8:throw e.prev=8,e.t0=e.catch(0),new Error("Error getting documents: "+e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),m.getDocument=function(){var e=(0,c.Z)((0,s.Z)().mark((function e(t,n){var r,a;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=(0,u.JU)(i.db,t,n),e.next=4,(0,u.QT)(r);case 4:if(!(a=e.sent).exists()){e.next=9;break}return e.abrupt("return",a.data());case 9:throw new Error("Document not found");case 10:e.next=15;break;case 12:throw e.prev=12,e.t0=e.catch(0),new Error("Error fetching document: "+e.t0.message);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,n){return e.apply(this,arguments)}}(),m.updateDocument=function(){var e=(0,c.Z)((0,s.Z)().mark((function e(t,n,r){var a;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=(0,u.JU)(i.db,t,n),e.next=4,(0,u.r7)(a,r);case 4:e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(0),new Error("Error updating document: "+e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n,r){return e.apply(this,arguments)}}(),m.deleteDocument=function(){var e=(0,c.Z)((0,s.Z)().mark((function e(t,n){var r;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=(0,u.JU)(i.db,t,n),e.next=4,(0,u.oe)(r);case 4:e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(0),new Error("Error deleting document: "+e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}(),m.addToArray=function(){var e=(0,c.Z)((0,s.Z)().mark((function e(t,n,a,c){var m;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,m=(0,u.JU)(i.db,t,n),e.next=4,(0,u.r7)(m,(0,r.Z)({},a,(0,u.vr)(c)));case 4:e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(0),new Error("Error adding to array: "+e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n,r,a){return e.apply(this,arguments)}}(),m.removeFromArray=function(){var e=(0,c.Z)((0,s.Z)().mark((function e(t,n,a,c){var m;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,m=(0,u.JU)(i.db,t,n),e.next=4,(0,u.r7)(m,(0,r.Z)({},a,(0,u.Ab)(c)));case 4:e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(0),new Error("Error removing from array: "+e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n,r,a){return e.apply(this,arguments)}}(),m.updateNestedMap=function(){var e=(0,c.Z)((0,s.Z)().mark((function e(t,n,a,c,m){var o;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o=(0,u.JU)(i.db,t,n),e.next=4,(0,u.r7)(o,(0,r.Z)({},"".concat(a,".").concat(c),m));case 4:e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(0),new Error("Error updating nested map: "+e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n,r,a,s){return e.apply(this,arguments)}}(),m.getDocumentByField=function(){var e=(0,c.Z)((0,s.Z)().mark((function e(t,n,r){var a,c;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=(0,u.IO)((0,u.hJ)(i.db,t),(0,u.ar)(n,"==",r)),e.next=4,(0,u.PL)(a);case 4:if((c=e.sent).empty){e.next=9;break}return e.abrupt("return",c.docs[0].data());case 9:throw new Error("Document not found");case 10:e.next=15;break;case 12:throw e.prev=12,e.t0=e.catch(0),new Error("Error fetching document: "+e.t0.message);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,n,r){return e.apply(this,arguments)}}(),t.Z=m},2035:function(e,t,n){n.d(t,{Z:function(){return A}});var r=n(4165),a=n(5861),s=n(9439),c=n(2791),i=n(1166),u=n(7615),m=n(6988),o=n(7309),l=n(3640),d=n(8470),f=n(4276),p=n(7689),h=n(4942),x=n(1413),Z=n(7145),v=n(6106),y=n(914),b=n(7888),N=n(376),S=n(8747),g=n(9286),j=n(184),D=Z.Z.Option,w={commDeffNoR:[{required:!0,message:"Please enter Definition No"}],commDeffNameR:[{required:!0,message:"Please enter Definition Name"}],commDeffSubNo:[{required:!0,message:"Please enter Definition Sub No"}],commDeffSubName:[{required:!0,message:"Please enter Definition Sub Name"}]},E=function(){var e=(0,c.useState)(!1),t=(0,s.Z)(e,2),n=(t[0],t[1]),i=(0,c.useState)(""),m=(0,s.Z)(i,2),l=m[0],d=m[1],p=(0,c.useState)([]),E=(0,s.Z)(p,2),k=E[0],T=E[1],C=(0,c.useState)([]),I=(0,s.Z)(C,2),q=I[0],A=I[1];(0,c.useEffect)((function(){var e=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(!0),e.prev=1,e.next=4,f.Z.getDocuments("commSysDeff");case 4:t=e.sent,Array.isArray(t)?T(t):console.error("Invalid data format:",t),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error("Error fetching project types:",e.t0);case 11:return e.prev=11,n(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[1,8,11,14]])})));return function(){return e.apply(this,arguments)}}();e()}),[]);var P=function(e,t){if(d((0,x.Z)((0,x.Z)({},l),{},(0,h.Z)({},t,e))),"commSysDeffNo"===t){var n=k.find((function(t){return t.commSysDeffNo===e}));A((null===n||void 0===n?void 0:n.commSysDeffSub)||[])}};return(0,j.jsxs)(v.Z,{gutter:16,children:[(0,j.jsx)(y.Z,{xs:24,sm:24,md:24,children:(0,j.jsxs)(b.Z,{title:"General Input Summary",children:[(0,j.jsx)(u.Z.Item,{name:"commSysDeffNo",label:"Comm System Deff No",rules:w.commDeffNoR,children:(0,j.jsx)(Z.Z,{className:"w-100",placeholder:"Select Comm System Deff No",value:l.commSysDeffNo||void 0,onChange:function(e){return P(e,"commSysDeffNo")},children:k.map((function(e){return(0,j.jsx)(D,{value:e.commSysDeffNo,children:e.commSysDeffNo},e.id)}))})}),(0,j.jsx)(u.Z.Item,{name:"commSysDeffName",label:"System Definition Name",rules:w.commDeffNameR,children:(0,j.jsx)(N.Z,{placeholder:"Enter Commissioning System Definition Name",type:"text",value:l.commSysDeffName,name:"commSysDeffName",onChange:function(e){return P(e)}})}),(0,j.jsx)(u.Z.Item,{name:"commSysDeffSubNo",label:"SubSystem Definition Number",rules:w.commDeffSubNo,children:(0,j.jsx)(Z.Z,{className:"w-100",placeholder:"Select Comm System Deff Sub No",value:l.commSysDeffSubNo||void 0,onChange:function(e){return P(e,"commSysDeffSubNo")},children:q.map((function(e){return(0,j.jsx)(D,{value:e.commSysDeffSubNo,children:e.commSysDeffSubNo},e.id)}))})}),(0,j.jsx)(u.Z.Item,{name:"commSysDeffSubName",label:"SubSystem Definition Name",rules:w.commDeffNameR,children:(0,j.jsx)(N.Z,{placeholder:"Enter Commissioning SubSystem Definition Name",type:"text",value:l.commSysDeffSubName,name:"commSysDeffSubName",onChange:function(e){return P(e)}})})]})}),(0,j.jsx)(y.Z,{xs:24,sm:24,md:24,children:(0,j.jsx)(b.Z,{title:"Summary List",children:(0,j.jsx)(u.Z.List,{name:"summSub",children:function(e,t){var n=t.add,r=t.remove;return(0,j.jsxs)("div",{className:"mt-3",children:[e.map((function(e,t){return(0,j.jsxs)(v.Z,{gutter:16,children:[(0,j.jsx)(y.Z,{sm:24,md:5,children:(0,j.jsx)(u.Z.Item,(0,x.Z)((0,x.Z)({},e),{},{label:"Piping Line No",name:[e.name,"pipingLineNo"],onChange:function(e){return P(e)},className:"w-100",children:(0,j.jsx)(N.Z,{})}))}),(0,j.jsx)(y.Z,{sm:24,md:5,children:(0,j.jsx)(u.Z.Item,(0,x.Z)((0,x.Z)({},e),{},{label:"Equipment Static",name:[e.name,"equipmentStatic"],onChange:function(e){return P(e)},className:"w-100",children:(0,j.jsx)(N.Z,{})}))}),(0,j.jsx)(y.Z,{sm:24,md:5,children:(0,j.jsx)(u.Z.Item,(0,x.Z)((0,x.Z)({},e),{},{label:"Equipment Rotary",name:[e.name,"equipmentRotary"],onChange:function(e){return P(e)},className:"w-100",children:(0,j.jsx)(N.Z,{})}))}),(0,j.jsx)(y.Z,{sm:24,md:5,children:(0,j.jsx)(u.Z.Item,(0,x.Z)((0,x.Z)({},e),{},{label:"Equipment Package",name:[e.name,"equipmentPackage"],onChange:function(e){return P(e)},className:"w-100",children:(0,j.jsx)(N.Z,{})}))}),(0,j.jsx)(y.Z,{sm:24,md:5,children:(0,j.jsx)(u.Z.Item,(0,x.Z)((0,x.Z)({},e),{},{label:"Instrument Tag No",name:[e.name,"instTagNo"],onChange:function(e){return P(e)},className:"w-100",children:(0,j.jsx)(N.Z,{})}))}),(0,j.jsx)(y.Z,{sm:24,md:5,children:(0,j.jsx)(u.Z.Item,(0,x.Z)((0,x.Z)({},e),{},{label:"Electrical EQP & Motor No",name:[e.name,"elecEq"],onChange:function(e){return P(e)},className:"w-100",children:(0,j.jsx)(N.Z,{})}))}),(0,j.jsx)(y.Z,{sm:24,md:5,children:(0,j.jsx)(u.Z.Item,(0,x.Z)((0,x.Z)({},e),{},{label:"Cable No",name:[e.name,"elecCableNo"],onChange:function(e){return P(e)},className:"w-100",children:(0,j.jsx)(N.Z,{})}))}),(0,j.jsx)(y.Z,{sm:24,md:2,children:(0,j.jsx)(S.Z,{className:"mt-md-4 pt-md-3",onClick:function(){r(e.name)}})}),(0,j.jsx)(y.Z,{span:24,children:(0,j.jsx)("hr",{className:"mt-2"})})]},e.key)})),(0,j.jsx)(u.Z.Item,{children:(0,j.jsxs)(o.ZP,{type:"dashed",onClick:function(){n()},className:"w-100",children:[(0,j.jsx)(g.Z,{})," Add field"]})})]})}})})})]})},k=n(7174),T=n(7008),C=function(e){var t=e.selectedId,n=(0,c.useState)(),i=(0,s.Z)(n,2),u=i[0],o=i[1],l=(0,c.useState)(null),p=(0,s.Z)(l,2),h=p[0],x=p[1],Z=(0,c.useState)(!0),v=(0,s.Z)(Z,2),y=v[0],N=v[1];if((0,c.useEffect)((function(){var e=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,N(!0),e.next=6,f.Z.getDocument("sumSysSub",t);case 6:n=e.sent,x(n),o((null===n||void 0===n?void 0:n.summSub)||[]),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),m.ZP.error("Error fetching data: ".concat(e.t0.message));case 14:return e.prev=14,N(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[2,11,14,17]])})));return function(){return e.apply(this,arguments)}}();e()}),[t]),y)return(0,j.jsx)("p",{children:"Loading..."});if(!h)return(0,j.jsx)("p",{children:"No data found"});return(0,j.jsxs)(b.Z,{children:[(0,j.jsx)(d.Z,{alignItems:"center",justifyContent:"space-between",mobileFlex:!1,children:(0,j.jsx)(d.Z,{className:"mb-1",mobileFlex:!1,children:(0,j.jsx)("div",{className:"mr-md-3 mb-3"})})}),(0,j.jsx)("div",{children:(0,j.jsxs)(k.Z,{title:"Summary List of System / Subsystem",bordered:!0,column:{xxl:3,xl:4,lg:2,md:2,sm:1,xs:1},children:[(0,j.jsx)(k.Z.Item,{label:"System Name",children:h.commSysDeffName||"N/A"}),(0,j.jsx)(k.Z.Item,{label:"System No",children:h.commSysDeffNo||"N/A"}),(0,j.jsx)(k.Z.Item,{label:"Sub-System Name",children:h.commSysDeffSubName||"N/A"}),(0,j.jsx)(k.Z.Item,{label:"Sub-System No",children:h.commSysDeffSubNo||"N/A"})]})}),(0,j.jsx)("br",{}),(0,j.jsxs)("div",{className:"table-responsive",children:[(0,j.jsx)(T.Z,{columns:[{title:"No",width:10,key:"name",dataIndex:"id",render:function(e,t,n){return n+1}},{title:"Piping",dataSource:"piping",children:[{title:"Line Number",dataIndex:"pipingLineNo",key:"pipingLineNo",width:50}]},{title:"Equipments",alignItems:"center",children:[{title:"Static Equipment",dataIndex:"equipmentStatic",key:"equipmentStatic",width:30},{title:"Rotary Equipment",dataIndex:"equipmentRotary",key:"equipmentRotary",width:30},{title:"Package Equipment",dataIndex:"equipmentPackage",key:"equipmentPackage",width:30}]},{title:"Instrument",children:[{title:"Tag Number",dataIndex:"instTagNo",key:"instTagNo",width:50}]},{title:"Electrical",children:[{title:"Eq & Motor No",dataIndex:"elecEq",key:"elecEq",width:40},{title:"Cable No",dataIndex:"elecCableNo",key:"elecCableNo",width:40}]}],dataSource:u,bordered:!0,size:"middle",scroll:{x:"calc(700px + 50%)",y:240}}),","]})]})},I="ADD",q="EDIT",A=function(e){var t=e.mode,n=void 0===t?I:t,h=e.param,x=u.Z.useForm(),Z=(0,s.Z)(x,1)[0],v=(0,c.useState)(!1),y=(0,s.Z)(v,2),b=y[0],N=y[1],S=(0,c.useState)(null),g=(0,s.Z)(S,2),D=g[0],w=g[1],k=(0,p.s0)();(0,c.useEffect)((function(){var e=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var t,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n!==q||!h.id){e.next=13;break}return w(h.id),t=h.id,e.prev=3,e.next=6,f.Z.getDocument("sumSysSub",t);case 6:a=e.sent,Z.setFieldsValue(a),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),m.ZP.error("Error fetching document: "+e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(){return e.apply(this,arguments)}}();e()}),[Z,n,h]);var T=function(){N(!0),Z.validateFields().then((function(e){setTimeout((function(){N(!1),n===I&&(m.ZP.success("Created ".concat(e.commSysDeffName," to sumSysSub")),k("/app/apps/summ-data/summ-syssub/summ-syssub-list")),n===q&&(m.ZP.success("Data saved"),k("/app/apps/summ-data/summ-syssub/summ-syssub-list"))}))})).catch((function(e){N(!1)}))},A=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var a,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n!==I){e.next=8;break}return e.next=4,f.Z.createDocument("sumSysSub",t);case 4:a=e.sent,m.ZP.success("Comm System created with ID: ".concat(a)),e.next=13;break;case 8:if(n!==q){e.next=13;break}return s=h.id,e.next=12,f.Z.updateDocument("sumSysSub",s,t);case 12:m.ZP.success("Comm System updated successfully");case 13:Z.resetFields(),T(),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),m.ZP.error("Error creating/updating Comm System Deff: "+e.t0.message);case 20:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(t){return e.apply(this,arguments)}}();return(0,j.jsx)(j.Fragment,{children:(0,j.jsxs)(u.Z,{layout:"vertical",form:Z,name:"advanced_search",className:"ant-advanced-search-form",initialValues:{commSysDeffName:"",commSysDeffNo:"",commSysDeffSubNo:"",commSysDeffSubName:"",summSub:[{pipingLineNo:"",equipmentStatic:"",equipmentRotary:"",equipmentPackage:"",instTagNo:"",elecEq:"",elecCableNo:""}]},onFinish:A,children:[(0,j.jsx)(i.Z,{className:"border-bottom",overlap:!0,children:(0,j.jsx)("div",{className:"container",children:(0,j.jsxs)(d.Z,{className:"py-2",mobileFlex:!1,justifyContent:"space-between",alignItems:"center",children:[(0,j.jsxs)("h2",{className:"mb-3",children:["ADD"===n?"Add Summary List System / Subsystem":"Edit Summary List System / Subsystem"," "]}),(0,j.jsxs)("div",{className:"mb-3",children:[(0,j.jsx)(o.ZP,{className:"mr-2",onClick:function(){Z.resetFields()},children:"Discard"}),(0,j.jsx)(o.ZP,{type:"primary",onClick:function(){return T()},htmlType:"submit",loading:b,children:"ADD"===n?"Add":"Save"})]})]})})}),(0,j.jsx)("div",{className:"container",children:(0,j.jsx)(l.Z,{defaultActiveKey:"1",style:{marginTop:30},items:[{label:"Summary Field",key:"1",children:(0,j.jsx)(E,{})},{label:"Summary Data Detail",key:"2",children:(0,j.jsx)(C,{selectedId:D})}]})})]})})}}}]);
//# sourceMappingURL=2035.e43f537d.chunk.js.map