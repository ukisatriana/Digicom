"use strict";(self.webpackChunkemilus=self.webpackChunkemilus||[]).push([[339],{1166:function(e,t,n){var r,a=n(168),c=n(9439),s=n(2791),i=n(364),o=n(2554),u=n(6443),m=n(4923);t.Z=function(e){var t=e.children,n=e.background,d=e.className,l=e.overlap,f=(0,s.useState)(0),p=(0,c.Z)(f,2),h=p[0],v=p[1],x=(0,s.useRef)(null),Z=(0,i.v9)((function(e){return e.theme.navType})),y=(0,i.v9)((function(e){return e.theme.currentTheme}));(0,s.useEffect)((function(){if(Z===u.XA){var e=window.innerWidth,t=x.current.offsetWidth;v((e-t)/2)}}),[Z]);return(0,m.tZ)("div",{ref:x,css:(0,o.iv)(r||(r=(0,a.Z)(["\n\t\t\t\tbackground-color: ",";\n\t\t\t\tpadding: ","px;\n\t\t\t\tmargin-top: -","px;\n\t\t\t\tmargin-left: -","px;\n\t\t\t\tmargin-right: -","px;\n\n\t\t\t\t@media "," {\n\t\t\t\t\tmargin-left: -","px;\n        \t\t\tmargin-right: -","px;\n\t\t\t\t}\n\n\t\t\t\t","\n\t\t\t"])),"dark"===y?"#2f3a50":u.wx.WHITE,u.hv.LAYOUT_CONTENT_GUTTER,u.hv.LAYOUT_CONTENT_GUTTER,u.hv.LAYOUT_CONTENT_GUTTER,u.hv.LAYOUT_CONTENT_GUTTER,u.qk.MOBILE,u.hv.LAYOUT_CONTENT_GUTTER_SM,u.hv.LAYOUT_CONTENT_GUTTER_SM,l?"margin-bottom: -4.6875rem;":""),className:"page-header-alt ".concat(d||""),style:function(){var e={backgroundImage:n?"url(".concat(n,")"):"none"};return Z===u.XA&&(e.marginRight=-h,e.marginLeft=-h,e.paddingLeft=0,e.paddingRight=0),e}(),children:Z===u.XA?(0,m.tZ)("div",{className:"container",children:t}):(0,m.tZ)(m.HY,{children:t})})}},8470:function(e,t,n){var r=n(1413),a=n(4236).Z.div((function(e){var t=e.justifyContent,n=e.alignItems,a=e.flexDirection,c=e.gap,s=e.padding,i=e.margin,o={display:"flex",justifyContent:t,alignItems:n,gap:"number"===typeof c?"".concat(c,"px"):c};return a&&(o.flexDirection=a),s&&(o.padding=s),i&&(o.margin=i),(0,r.Z)({},o)}));t.Z=a},4276:function(e,t,n){var r=n(4942),a=n(1413),c=n(4165),s=n(5861),i=n(5020),o=n(6724),u={};u.createDocument=function(){var e=(0,s.Z)((0,c.Z)().mark((function e(t,n){var r;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,o.ET)((0,o.hJ)(i.db,t),n);case 3:return r=e.sent,e.abrupt("return",r.id);case 7:throw e.prev=7,e.t0=e.catch(0),new Error("Error adding document: "+e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}(),u.getDocuments=function(){var e=(0,s.Z)((0,c.Z)().mark((function e(t){var n,r;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,o.PL)((0,o.hJ)(i.db,t));case 3:return n=e.sent,r=n.docs.map((function(e){return(0,a.Z)({id:e.id},e.data())})),e.abrupt("return",r);case 8:throw e.prev=8,e.t0=e.catch(0),new Error("Error getting documents: "+e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),u.getDocument=function(){var e=(0,s.Z)((0,c.Z)().mark((function e(t,n){var r,a;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=(0,o.JU)(i.db,t,n),e.next=4,(0,o.QT)(r);case 4:if(!(a=e.sent).exists()){e.next=9;break}return e.abrupt("return",a.data());case 9:throw new Error("Document not found");case 10:e.next=15;break;case 12:throw e.prev=12,e.t0=e.catch(0),new Error("Error fetching document: "+e.t0.message);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,n){return e.apply(this,arguments)}}(),u.updateDocument=function(){var e=(0,s.Z)((0,c.Z)().mark((function e(t,n,r){var a;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=(0,o.JU)(i.db,t,n),e.next=4,(0,o.r7)(a,r);case 4:e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(0),new Error("Error updating document: "+e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n,r){return e.apply(this,arguments)}}(),u.deleteDocument=function(){var e=(0,s.Z)((0,c.Z)().mark((function e(t,n){var r;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=(0,o.JU)(i.db,t,n),e.next=4,(0,o.oe)(r);case 4:e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(0),new Error("Error deleting document: "+e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}(),u.addToArray=function(){var e=(0,s.Z)((0,c.Z)().mark((function e(t,n,a,s){var u;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,u=(0,o.JU)(i.db,t,n),e.next=4,(0,o.r7)(u,(0,r.Z)({},a,(0,o.vr)(s)));case 4:e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(0),new Error("Error adding to array: "+e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n,r,a){return e.apply(this,arguments)}}(),u.removeFromArray=function(){var e=(0,s.Z)((0,c.Z)().mark((function e(t,n,a,s){var u;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,u=(0,o.JU)(i.db,t,n),e.next=4,(0,o.r7)(u,(0,r.Z)({},a,(0,o.Ab)(s)));case 4:e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(0),new Error("Error removing from array: "+e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n,r,a){return e.apply(this,arguments)}}(),u.updateNestedMap=function(){var e=(0,s.Z)((0,c.Z)().mark((function e(t,n,a,s,u){var m;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,m=(0,o.JU)(i.db,t,n),e.next=4,(0,o.r7)(m,(0,r.Z)({},"".concat(a,".").concat(s),u));case 4:e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(0),new Error("Error updating nested map: "+e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n,r,a,c){return e.apply(this,arguments)}}(),u.getDocumentByField=function(){var e=(0,s.Z)((0,c.Z)().mark((function e(t,n,r){var a,s;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=(0,o.IO)((0,o.hJ)(i.db,t),(0,o.ar)(n,"==",r)),e.next=4,(0,o.PL)(a);case 4:if((s=e.sent).empty){e.next=9;break}return e.abrupt("return",s.docs[0].data());case 9:throw new Error("Document not found");case 10:e.next=15;break;case 12:throw e.prev=12,e.t0=e.catch(0),new Error("Error fetching document: "+e.t0.message);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,n,r){return e.apply(this,arguments)}}(),t.Z=u},339:function(e,t,n){n.d(t,{Z:function(){return P}});var r=n(4165),a=n(5861),c=n(9439),s=n(2791),i=n(1166),o=n(7615),u=n(6988),m=n(7309),d=n(3640),l=n(8470),f=n(4276),p=n(7689),h=n(4942),v=n(1413),x=n(7145),Z=n(6106),y=n(914),b=n(7888),N=n(376),g=n(8747),S=n(9286),D=n(184),j=x.Z.Option,w={commDeffNoR:[{required:!0,message:"Please enter Definition No"}],commDeffNameR:[{required:!0,message:"Please enter Definition Name"}],commDeffSubNo:[{required:!0,message:"Please enter Definition Sub No"}],commDeffSubName:[{required:!0,message:"Please enter Definition Sub Name"}]},k=function(){var e=(0,s.useState)(!1),t=(0,c.Z)(e,2),n=(t[0],t[1]),i=(0,s.useState)(""),u=(0,c.Z)(i,2),d=u[0],l=u[1],p=(0,s.useState)([]),k=(0,c.Z)(p,2),E=k[0],A=k[1],T=(0,s.useState)([]),I=(0,c.Z)(T,2),C=I[0],P=I[1];(0,s.useEffect)((function(){var e=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(!0),e.prev=1,e.next=4,f.Z.getDocuments("commSysDeff");case 4:t=e.sent,Array.isArray(t)?A(t):console.error("Invalid data format:",t),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error("Error fetching project types:",e.t0);case 11:return e.prev=11,n(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[1,8,11,14]])})));return function(){return e.apply(this,arguments)}}();e()}),[]);var R=function(e,t){if(l((0,v.Z)((0,v.Z)({},d),{},(0,h.Z)({},t,e))),"commSysDeffNo"===t){var n=E.find((function(t){return t.commSysDeffNo===e}));P((null===n||void 0===n?void 0:n.commSysDeffSub)||[])}};return(0,D.jsxs)(Z.Z,{gutter:16,children:[(0,D.jsx)(y.Z,{xs:24,sm:24,md:24,children:(0,D.jsxs)(b.Z,{title:"General Input Identification",children:[(0,D.jsx)(o.Z.Item,{name:"commSysDeffNo",label:"Comm System Deff No",rules:w.commDeffNoR,children:(0,D.jsx)(x.Z,{className:"w-100",placeholder:"Select Comm System Deff No",value:d.commSysDeffNo||void 0,onChange:function(e){return R(e,"commSysDeffNo")},children:E.map((function(e){return(0,D.jsx)(j,{value:e.commSysDeffNo,children:e.commSysDeffNo},e.id)}))})}),(0,D.jsx)(o.Z.Item,{name:"commSysDeffName",label:"System Definition Name",rules:w.commDeffNameR,children:(0,D.jsx)(N.Z,{placeholder:"Enter Commissioning System Definition Name",type:"text",value:d.commSysDeffName,name:"commSysDeffName",onChange:function(e){return R(e)}})}),(0,D.jsx)(o.Z.Item,{name:"commSysDeffSubNo",label:"SubSystem Definition Number",rules:w.commDeffSubNo,children:(0,D.jsx)(x.Z,{className:"w-100",placeholder:"Select Comm System Deff Sub No",value:d.commSysDeffSubNo||void 0,onChange:function(e){return R(e,"commSysDeffSubNo")},children:C.map((function(e){return(0,D.jsx)(j,{value:e.commSysDeffSubNo,children:e.commSysDeffSubNo},e.id)}))})}),(0,D.jsx)(o.Z.Item,{name:"commSysDeffSubName",label:"SubSystem Definition Name",rules:w.commDeffNameR,children:(0,D.jsx)(N.Z,{placeholder:"Enter Commissioning SubSystem Definition Name",type:"text",value:d.commSysDeffSubName,name:"commSysDeffSubName",onChange:function(e){return R(e)}})})]})}),(0,D.jsx)(y.Z,{xs:24,sm:24,md:24,children:(0,D.jsx)(b.Z,{title:"Identification Activities Field",children:(0,D.jsx)(o.Z.List,{name:"identActivitySub",children:function(e,t){var n=t.add,r=t.remove;return(0,D.jsxs)("div",{className:"mt-3",children:[e.map((function(e,t){return(0,D.jsxs)(Z.Z,{gutter:16,children:[(0,D.jsx)(y.Z,{sm:24,md:6,children:(0,D.jsx)(o.Z.Item,(0,v.Z)((0,v.Z)({},e),{},{label:"Tag No",name:[e.name,"tagNo"],onChange:function(e){return R(e)},className:"w-100",children:(0,D.jsx)(N.Z,{})}))}),(0,D.jsx)(y.Z,{sm:24,md:5,children:(0,D.jsx)(o.Z.Item,(0,v.Z)((0,v.Z)({},e),{},{label:"Item Description",name:[e.name,"itemDesc"],onChange:function(e){return R(e)},className:"w-100",children:(0,D.jsx)(N.Z,{})}))}),(0,D.jsx)(y.Z,{sm:24,md:5,children:(0,D.jsx)(o.Z.Item,(0,v.Z)((0,v.Z)({},e),{},{label:"Commissioning Activities",name:[e.name,"commActivities"],onChange:function(e){return R(e)},className:"w-100",children:(0,D.jsx)(N.Z,{})}))}),(0,D.jsx)(y.Z,{sm:24,md:6,children:(0,D.jsx)(o.Z.Item,(0,v.Z)((0,v.Z)({},e),{},{label:"Specific Procedure Required",name:[e.name,"specProcedurReq"],onChange:function(e){return R(e)},className:"w-100",children:(0,D.jsx)(N.Z,{})}))}),(0,D.jsx)(y.Z,{sm:24,md:2,children:(0,D.jsx)(g.Z,{className:"mt-md-4 pt-md-3",onClick:function(){r(e.name)}})}),(0,D.jsx)(y.Z,{span:24,children:(0,D.jsx)("hr",{className:"mt-2"})})]},e.key)})),(0,D.jsx)(o.Z.Item,{children:(0,D.jsxs)(m.ZP,{type:"dashed",onClick:function(){n()},className:"w-100",children:[(0,D.jsx)(S.Z,{})," Add field"]})})]})}})})})]})},E=n(7174),A=n(7008),T=function(e){var t=e.selectedId,n=(0,s.useState)(),i=(0,c.Z)(n,2),o=i[0],m=i[1],d=(0,s.useState)(null),p=(0,c.Z)(d,2),h=p[0],v=p[1],x=(0,s.useState)(!0),Z=(0,c.Z)(x,2),y=Z[0],N=Z[1];if((0,s.useEffect)((function(){var e=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,N(!0),e.next=6,f.Z.getDocument("identActivity",t);case 6:n=e.sent,v(n),m((null===n||void 0===n?void 0:n.identActivitySub)||[]),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),u.ZP.error("Error fetching data: ".concat(e.t0.message));case 14:return e.prev=14,N(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[2,11,14,17]])})));return function(){return e.apply(this,arguments)}}();e()}),[t]),y)return(0,D.jsx)("p",{children:"Loading..."});if(!h)return(0,D.jsx)("p",{children:"No data found"});return(0,D.jsxs)(b.Z,{children:[(0,D.jsx)(l.Z,{alignItems:"center",justifyContent:"space-between",mobileFlex:!1,children:(0,D.jsx)(l.Z,{className:"mb-1",mobileFlex:!1,children:(0,D.jsx)("div",{className:"mr-md-3 mb-3"})})}),(0,D.jsx)("div",{children:(0,D.jsxs)(E.Z,{title:"Summary List of System / Subsystem",bordered:!0,column:{xxl:3,xl:4,lg:2,md:2,sm:1,xs:1},children:[(0,D.jsx)(E.Z.Item,{label:"System Name",children:h.commSysDeffName||"N/A"}),(0,D.jsx)(E.Z.Item,{label:"System No",children:h.commSysDeffNo||"N/A"}),(0,D.jsx)(E.Z.Item,{label:"Sub-System Name",children:h.commSysDeffSubName||"N/A"}),(0,D.jsx)(E.Z.Item,{label:"Sub-System No",children:h.commSysDeffSubNo||"N/A"})]})}),(0,D.jsx)("br",{}),(0,D.jsxs)("div",{className:"table-responsive",children:[(0,D.jsx)(A.Z,{columns:[{title:"No",width:10,key:"name",dataIndex:"id",render:function(e,t,n){return n+1}},{title:"Tag Number",dataIndex:"tagNo",key:"tagNo",width:50},{title:"Item Description",dataIndex:"itemDesc",key:"itemDesc",width:50},{title:"Commisioning Activities",dataIndex:"commActivities",key:"commActivities",width:50},{title:"Specific Procedure Required",dataIndex:"specProcedurReq",key:"specProcedurReq",width:50}],dataSource:o,bordered:!0,size:"middle",scroll:{x:"calc(700px + 50%)",y:240}}),","]})]})},I="ADD",C="EDIT",P=function(e){var t=e.mode,n=void 0===t?I:t,h=e.param,v=o.Z.useForm(),x=(0,c.Z)(v,1)[0],Z=(0,s.useState)(!1),y=(0,c.Z)(Z,2),b=y[0],N=y[1],g=(0,s.useState)(null),S=(0,c.Z)(g,2),j=S[0],w=S[1],E=(0,p.s0)();(0,s.useEffect)((function(){var e=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var t,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n!==C||!h.id){e.next=13;break}return w(h.id),t=h.id,e.prev=3,e.next=6,f.Z.getDocument("identActivity",t);case 6:a=e.sent,x.setFieldsValue(a),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),u.ZP.error("Error fetching document: "+e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(){return e.apply(this,arguments)}}();e()}),[x,n,h]);var A=function(){N(!0),x.validateFields().then((function(e){setTimeout((function(){N(!1),n===I&&(u.ZP.success("Created ".concat(e.commSysDeffName," to identActivity")),E("/app/apps/ident-activity/ident-activity-list")),n===C&&(u.ZP.success("Data saved"),E("/app/apps/ident-activity/ident-activity-list"))}))})).catch((function(e){N(!1)}))},P=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var a,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n!==I){e.next=8;break}return e.next=4,f.Z.createDocument("identActivity",t);case 4:a=e.sent,u.ZP.success("Comm System created with ID: ".concat(a)),e.next=13;break;case 8:if(n!==C){e.next=13;break}return c=h.id,e.next=12,f.Z.updateDocument("identActivity",c,t);case 12:u.ZP.success("Comm System updated successfully");case 13:x.resetFields(),A(),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),u.ZP.error("Error creating/updating Comm System Deff: "+e.t0.message);case 20:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(t){return e.apply(this,arguments)}}();return(0,D.jsx)(D.Fragment,{children:(0,D.jsxs)(o.Z,{layout:"vertical",form:x,name:"advanced_search",className:"ant-advanced-search-form",initialValues:{commSysDeffName:"",commSysDeffNo:"",commSysDeffSubNo:"",commSysDeffSubName:"",identActivitySub:[{tagNo:"",itemDesc:"",commActivities:"",specProcedurReq:""}]},onFinish:P,children:[(0,D.jsx)(i.Z,{className:"border-bottom",overlap:!0,children:(0,D.jsx)("div",{className:"container",children:(0,D.jsxs)(l.Z,{className:"py-2",mobileFlex:!1,justifyContent:"space-between",alignItems:"center",children:[(0,D.jsxs)("h2",{className:"mb-3",children:["ADD"===n?"Add Indetification Activities":"Edit Identfication Activities"," "]}),(0,D.jsxs)("div",{className:"mb-3",children:[(0,D.jsx)(m.ZP,{className:"mr-2",onClick:function(){x.resetFields()},children:"Discard"}),(0,D.jsx)(m.ZP,{type:"primary",onClick:function(){return A()},htmlType:"submit",loading:b,children:"ADD"===n?"Add":"Save"})]})]})})}),(0,D.jsx)("div",{className:"container",children:(0,D.jsx)(d.Z,{defaultActiveKey:"1",style:{marginTop:30},items:[{label:"Ident Activity Field",key:"1",children:(0,D.jsx)(k,{})},{label:"Ident Activity Detail",key:"2",children:(0,D.jsx)(T,{selectedId:j})}]})})]})})}}}]);
//# sourceMappingURL=339.a9ada713.chunk.js.map