"use strict";(self.webpackChunkemilus=self.webpackChunkemilus||[]).push([[9621],{1166:function(e,r,t){var n,a=t(168),c=t(9439),o=t(2791),s=t(364),i=t(2554),u=t(6443),p=t(4923);r.Z=function(e){var r=e.children,t=e.background,l=e.className,m=e.overlap,d=(0,o.useState)(0),f=(0,c.Z)(d,2),v=f[0],h=f[1],Z=(0,o.useRef)(null),x=(0,s.v9)((function(e){return e.theme.navType})),g=(0,s.v9)((function(e){return e.theme.currentTheme}));(0,o.useEffect)((function(){if(x===u.XA){var e=window.innerWidth,r=Z.current.offsetWidth;h((e-r)/2)}}),[x]);return(0,p.tZ)("div",{ref:Z,css:(0,i.iv)(n||(n=(0,a.Z)(["\n\t\t\t\tbackground-color: ",";\n\t\t\t\tpadding: ","px;\n\t\t\t\tmargin-top: -","px;\n\t\t\t\tmargin-left: -","px;\n\t\t\t\tmargin-right: -","px;\n\n\t\t\t\t@media "," {\n\t\t\t\t\tmargin-left: -","px;\n        \t\t\tmargin-right: -","px;\n\t\t\t\t}\n\n\t\t\t\t","\n\t\t\t"])),"dark"===g?"#2f3a50":u.wx.WHITE,u.hv.LAYOUT_CONTENT_GUTTER,u.hv.LAYOUT_CONTENT_GUTTER,u.hv.LAYOUT_CONTENT_GUTTER,u.hv.LAYOUT_CONTENT_GUTTER,u.qk.MOBILE,u.hv.LAYOUT_CONTENT_GUTTER_SM,u.hv.LAYOUT_CONTENT_GUTTER_SM,m?"margin-bottom: -4.6875rem;":""),className:"page-header-alt ".concat(l||""),style:function(){var e={backgroundImage:t?"url(".concat(t,")"):"none"};return x===u.XA&&(e.marginRight=-v,e.marginLeft=-v,e.paddingLeft=0,e.paddingRight=0),e}(),children:x===u.XA?(0,p.tZ)("div",{className:"container",children:r}):(0,p.tZ)(p.HY,{children:r})})}},8470:function(e,r,t){var n=t(1413),a=t(4236).Z.div((function(e){var r=e.justifyContent,t=e.alignItems,a=e.flexDirection,c=e.gap,o=e.padding,s=e.margin,i={display:"flex",justifyContent:r,alignItems:t,gap:"number"===typeof c?"".concat(c,"px"):c};return a&&(i.flexDirection=a),o&&(i.padding=o),s&&(i.margin=s),(0,n.Z)({},i)}));r.Z=a},4276:function(e,r,t){var n=t(4942),a=t(1413),c=t(4165),o=t(5861),s=t(5020),i=t(6724),u={};u.createDocument=function(){var e=(0,o.Z)((0,c.Z)().mark((function e(r,t){var n;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,i.ET)((0,i.hJ)(s.db,r),t);case 3:return n=e.sent,e.abrupt("return",n.id);case 7:throw e.prev=7,e.t0=e.catch(0),new Error("Error adding document: "+e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(r,t){return e.apply(this,arguments)}}(),u.getDocuments=function(){var e=(0,o.Z)((0,c.Z)().mark((function e(r){var t,n;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,i.PL)((0,i.hJ)(s.db,r));case 3:return t=e.sent,n=t.docs.map((function(e){return(0,a.Z)({id:e.id},e.data())})),e.abrupt("return",n);case 8:throw e.prev=8,e.t0=e.catch(0),new Error("Error getting documents: "+e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(r){return e.apply(this,arguments)}}(),u.getDocument=function(){var e=(0,o.Z)((0,c.Z)().mark((function e(r,t){var n,a;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=(0,i.JU)(s.db,r,t),e.next=4,(0,i.QT)(n);case 4:if(!(a=e.sent).exists()){e.next=9;break}return e.abrupt("return",a.data());case 9:throw new Error("Document not found");case 10:e.next=15;break;case 12:throw e.prev=12,e.t0=e.catch(0),new Error("Error fetching document: "+e.t0.message);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(r,t){return e.apply(this,arguments)}}(),u.updateDocument=function(){var e=(0,o.Z)((0,c.Z)().mark((function e(r,t,n){var a;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=(0,i.JU)(s.db,r,t),e.next=4,(0,i.r7)(a,n);case 4:e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(0),new Error("Error updating document: "+e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(r,t,n){return e.apply(this,arguments)}}(),u.deleteDocument=function(){var e=(0,o.Z)((0,c.Z)().mark((function e(r,t){var n;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=(0,i.JU)(s.db,r,t),e.next=4,(0,i.oe)(n);case 4:e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(0),new Error("Error deleting document: "+e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(r,t){return e.apply(this,arguments)}}(),u.addToArray=function(){var e=(0,o.Z)((0,c.Z)().mark((function e(r,t,a,o){var u;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,u=(0,i.JU)(s.db,r,t),e.next=4,(0,i.r7)(u,(0,n.Z)({},a,(0,i.vr)(o)));case 4:e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(0),new Error("Error adding to array: "+e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(r,t,n,a){return e.apply(this,arguments)}}(),u.removeFromArray=function(){var e=(0,o.Z)((0,c.Z)().mark((function e(r,t,a,o){var u;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,u=(0,i.JU)(s.db,r,t),e.next=4,(0,i.r7)(u,(0,n.Z)({},a,(0,i.Ab)(o)));case 4:e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(0),new Error("Error removing from array: "+e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(r,t,n,a){return e.apply(this,arguments)}}(),u.updateNestedMap=function(){var e=(0,o.Z)((0,c.Z)().mark((function e(r,t,a,o,u){var p;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p=(0,i.JU)(s.db,r,t),e.next=4,(0,i.r7)(p,(0,n.Z)({},"".concat(a,".").concat(o),u));case 4:e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(0),new Error("Error updating nested map: "+e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(r,t,n,a,c){return e.apply(this,arguments)}}(),u.getDocumentByField=function(){var e=(0,o.Z)((0,c.Z)().mark((function e(r,t,n){var a,o;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=(0,i.IO)((0,i.hJ)(s.db,r),(0,i.ar)(t,"==",n)),e.next=4,(0,i.PL)(a);case 4:if((o=e.sent).empty){e.next=9;break}return e.abrupt("return",o.docs[0].data());case 9:throw new Error("Document not found");case 10:e.next=15;break;case 12:throw e.prev=12,e.t0=e.catch(0),new Error("Error fetching document: "+e.t0.message);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(r,t,n){return e.apply(this,arguments)}}(),r.Z=u},9621:function(e,r,t){t.d(r,{Z:function(){return P}});var n=t(4165),a=t(5861),c=t(9439),o=t(2791),s=t(1166),i=t(7615),u=t(6988),p=t(7309),l=t(3640),m=t(8470),d=t(4276),f=t(7689),v=t(4942),h=t(1413),Z=t(7145),x=t(7888),g=t(43),j=t(6106),b=t(914),w=t(376),y=t(184),E=Z.Z.Option,T={projectName:[{required:!0,message:"Please enter project name"}],projectLocation:[{required:!0,message:"Please enter project location"}],projectTypeName:[{required:!0,message:"Please select project type"}],projectManagerName:[{required:!0,message:"Please enter manager name"}]},k=function(){var e=(0,o.useState)({projectName:"",projectLocation:"",projectTypeName:"",projectDivisiName:"",projectManagerName:""}),r=(0,c.Z)(e,2),t=r[0],s=r[1],u=(0,o.useState)([]),p=(0,c.Z)(u,2),l=p[0],m=p[1],f=(0,o.useState)([]),k=(0,c.Z)(f,2),N=k[0],D=k[1],P=(0,o.useState)(!1),A=(0,c.Z)(P,2),U=A[0],C=A[1];(0,o.useEffect)((function(){var e=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){var r,t,a,o;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C(!0),e.prev=1,e.next=4,Promise.all([d.Z.getDocuments("projectType"),d.Z.getDocuments("projectDivisi")]);case 4:r=e.sent,t=(0,c.Z)(r,2),a=t[0],o=t[1],Array.isArray(a)?m(a):console.error("Invalid project types format: ",a),Array.isArray(o)?D(o):console.error("Invalid project divisi format: ",o),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.error("Error fetching data:",e.t0);case 15:return e.prev=15,C(!1),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[1,12,15,18]])})));return function(){return e.apply(this,arguments)}}();e()}),[]);var L=function(e,r){s((function(t){return(0,h.Z)((0,h.Z)({},t),{},(0,v.Z)({},r,e))}))};return U?(0,y.jsx)(x.Z,{title:"Project",children:(0,y.jsx)(g.Z,{tip:"Loading..."})}):(0,y.jsx)(x.Z,{title:"Project",children:(0,y.jsxs)(j.Z,{gutter:16,children:[[{name:"projectName",label:"Project Name",type:"input"},{name:"projectLocation",label:"Project Location",type:"input"},{name:"projectManagerName",label:"Manager Project Name",type:"input"}].map((function(e){return(0,y.jsx)(b.Z,{span:24,children:(0,y.jsx)(i.Z.Item,{name:e.name,label:e.label,rules:T[e.name],children:(0,y.jsx)(w.Z,{placeholder:"Enter ".concat(e.label),value:t[e.name],onChange:function(r){return L(r.target.value,e.name)}})})},e.name)})),[{name:"projectTypeName",label:"Project Type",options:l},{name:"projectDivisiName",label:"Project Divisi Name",options:N}].map((function(e){return(0,y.jsx)(b.Z,{span:24,children:(0,y.jsx)(i.Z.Item,{name:e.name,label:e.label,rules:T[e.name],children:(0,y.jsx)(Z.Z,{className:"w-100",placeholder:"Select ".concat(e.label),value:t[e.name]||void 0,onChange:function(r){return L(r,e.name)},children:e.options.map((function(r){return(0,y.jsx)(E,{value:r[e.name],children:r[e.name]},r.id)}))})})},e.name)}))]})})},N="ADD",D="EDIT",P=function(e){var r=e.mode,t=void 0===r?N:r,v=e.param,h=i.Z.useForm(),Z=(0,c.Z)(h,1)[0],x=(0,o.useState)(!1),g=(0,c.Z)(x,2),j=g[0],b=g[1],w=(0,f.s0)();(0,o.useEffect)((function(){var e=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){var r,a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==D){e.next=12;break}return r=v.id,e.prev=2,e.next=5,d.Z.getDocument("project",r);case 5:a=e.sent,Z.setFieldsValue(a),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),u.ZP.error("Error fetching document: "+e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}();e()}),[Z,t,v]);var E=function(){b(!0),Z.validateFields().then((function(e){setTimeout((function(){b(!1),t===N&&w("/app/apps/project/project-list"),t===D&&w("/app/apps/project/project-list")}))})).catch((function(e){b(!1)}))},T=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(r){var a,c;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t!==N){e.next=8;break}return e.next=4,d.Z.createDocument("project",r);case 4:a=e.sent,u.ZP.success("Project created with ID: ".concat(a)),e.next=13;break;case 8:if(t!==D){e.next=13;break}return c=v.id,e.next=12,d.Z.updateDocument("project",c,r);case 12:u.ZP.success("Project updated successfully");case 13:Z.resetFields(),E(),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),u.ZP.error("Error creating/updating Jenis Clash: "+e.t0.message);case 20:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(r){return e.apply(this,arguments)}}();return(0,y.jsx)(y.Fragment,{children:(0,y.jsxs)(i.Z,{layout:"vertical",form:Z,name:"advanced_search",className:"ant-advanced-search-form",onFinish:T,children:[(0,y.jsx)(s.Z,{className:"border-bottom",overlap:!0,children:(0,y.jsx)("div",{className:"container",children:(0,y.jsxs)(m.Z,{className:"py-2",mobileFlex:!1,justifyContent:"space-between",alignItems:"center",children:[(0,y.jsxs)("h2",{className:"mb-3",children:["ADD"===t?"Add New Project":"Edit Project"," "]}),(0,y.jsxs)("div",{className:"mb-3",children:[(0,y.jsx)(p.ZP,{className:"mr-2",onClick:function(){Z.resetFields()},children:"Discard"}),(0,y.jsx)(p.ZP,{type:"primary",onClick:function(){return E()},htmlType:"submit",loading:j,children:"ADD"===t?"Add":"Save"})]})]})})}),(0,y.jsx)("div",{className:"container",children:(0,y.jsx)(l.Z,{defaultActiveKey:"1",style:{marginTop:30},items:[{label:"Project Field",key:"1",children:(0,y.jsx)(k,{})}]})})]})})}},2554:function(e,r,t){t.d(r,{iv:function(){return a}});t(2791),t(6215),t(2110);var n=t(9041);t(2561);function a(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,n.O)(r)}},4923:function(e,r,t){t.d(r,{BX:function(){return s},HY:function(){return c},tZ:function(){return o}});t(2791),t(6215);var n=t(9886),a=(t(2110),t(9041),t(2561),t(184)),c=a.Fragment;function o(e,r,t){return n.h.call(r,"css")?(0,a.jsx)(n.E,(0,n.c)(e,r),t):(0,a.jsx)(e,r,t)}function s(e,r,t){return n.h.call(r,"css")?(0,a.jsxs)(n.E,(0,n.c)(e,r),t):(0,a.jsxs)(e,r,t)}}}]);
//# sourceMappingURL=9621.f3e6a695.chunk.js.map